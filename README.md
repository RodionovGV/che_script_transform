[TOC]

# che_script_transform

Скрипт для первичной обработки фрагментов ПСС Чернышевского



# Для работы скрипта

1. Должен быть установлен python. 

2. Проверка в cmd Windows:

   ```
   py --v
   ```

   если команда не опознана - нужно установить [python](https://www.python.org/downloads/windows/)3.

   

# Применение

1. Скопировать в папку файл фрагмент.

2. Править в файле `run_Che_rule.cmd` имя входного файла и выходного:

   ```
   python Che_transform.py 1_358-367
   ```

   Для правки нужно открыть файл в текстовом редакторе.

3. Запустить `run_Che_rule.cmd`, появятся выходной файлы **1_358-367_pred.md** и **1_358-367_done.md**.

4. Открыть **1_358-367_pred.md** и **1_358-367_done.md** файлы в средстве сравнения текстов, например в notepad++.

5. Выполнить сравнение текстов, исправить ошибки.

   _pred - файл нужен для устранения существенных различий между итоговым файлом. Для удобвства сравнения. В нём удаляются лишние пустые строки и лишние пробелы.

## Особенности работы сравнения notepad++

### Начало работы

1. Ссылка скачивания [notepad++](https://notepad-plus-plus.org/downloads/).

2. Для сравнения текстов в notepad++ должен быть установлен плагин compare. Для установки в меню `Плагины -> Управление плагинами -> Поиск (набрать Compare)` отметить и нажать кнопку Установить.

3. После установки появятся кнопки сравнения:

   ![image-20210509133017445](img/image-20210509133017445.png)

4. Если открыто два файла (pred и done), то перейти в сгенерированный файл и нажать вторую кнопку и выполнится сравнение файлов.

5. Если несколько, то перейти на done файл и нажат кнопку с цифрой 1.

6. Перейти в pred файл и нажать вторую кнопку - выполниться сравнение файлов.

### Сравнение

1. Сравнение выполняется построчно, поэтому должно совпадать число строк.
2. После добаления после абзаца заготовки для добавления сноски происходит сбой нумерации абзацев для алгоритма сравнения. Для восстановления работы алгоритма сравнения в pred файл нужно добавить пустую строку после абзаца и снова нажать вторую кнопку плагина Compare - выполниться повторное сравнение и восстановится верное сравнение абзацев.
3. Таким образом выполнить сравнение исходного и обработанного скриптом файла и в процессе сравнения исправить неточности, которые могут возникнуть.

# Отладка

1. Для отладки и проверки работы скрипта есть файл **input.md**, в который добавляем все возможные варианты, которые нужно обработать скриптом.
2. Для проверки работы скрипта запустить `run_Che_dbg.cmd`, появится выходной файл output.md. Выполнить проверку работы скрипта.